<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="VMware Update Manager: Unsupported Configuration" />
<meta property="og:description" content="During an upgrade from vSphere 5.1 to 5.5, I ran into a rather strange issue when trying to utilize VMware Update Manager to perform the ESXi upgrade.
During scanning, VUM reported the ESXi host as &ldquo;Incompatible&rdquo;, without offering any other explanation. I spent ages looking through VUM logs, trying to find the culprit, suspecting it was an incompatible VIB. Without finding anything that gave me any indication on what the problem might be, I moved on to looking at the ESXi image I had imported into VUM." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/vmware-2/vmware-update-manager-unsupported-configuration/" />



<meta property="article:published_time" content="2015-08-28T10:46:24&#43;00:00"/>

<meta property="article:modified_time" content="2015-08-28T10:46:24&#43;00:00"/>











<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="VMware Update Manager: Unsupported Configuration"/>
<meta name="twitter:description" content="During an upgrade from vSphere 5.1 to 5.5, I ran into a rather strange issue when trying to utilize VMware Update Manager to perform the ESXi upgrade.
During scanning, VUM reported the ESXi host as &ldquo;Incompatible&rdquo;, without offering any other explanation. I spent ages looking through VUM logs, trying to find the culprit, suspecting it was an incompatible VIB. Without finding anything that gave me any indication on what the problem might be, I moved on to looking at the ESXi image I had imported into VUM."/>
<meta name="generator" content="Hugo 0.40.3" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "VMware Update Manager: Unsupported Configuration",
  "url": "/vmware-2/vmware-update-manager-unsupported-configuration/",
  "wordCount": "353",
  "datePublished": "2015-08-28T10:46:24&#43;00:00",
  "dateModified": "2015-08-28T10:46:24&#43;00:00",
  "author": {
    "@type": "Person",
    "name": "cmohn"
  },
  "keywords": "VMware, ESXi, NFS, Upgrade, vCenter, Veeam Backup &amp; Replication"
}
</script>



    <link rel="canonical" href="/vmware-2/vmware-update-manager-unsupported-configuration/">

    <title>VMware Update Manager: Unsupported Configuration | Adventures in Hugo</title>

    <!-- combined, minified CSS -->
    <link href="/css/style.css" rel="stylesheet" integrity="sha384-TbfEhJn4HkgPUIZUhhHaAYsycYKHxSuIloCjZOiyCSpbVunRQxg5T5pxKVFwxilF" crossorigin="anonymous">

    

    

    

    

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="/">Home</a>
          
          <a class="nav-link" href="https://example.org" title="">Link 1</a>
          
        </nav>
      </div>
    </div>
    

    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title"><a href="/" rel="home">Adventures in Hugo</a></h1>
        <p class="lead blog-description">There is a thin line between agile and fragile</p>
      </div>
    </header>
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title"><a href="/vmware-2/vmware-update-manager-unsupported-configuration/">VMware Update Manager: Unsupported Configuration</a></h2>
    <p class="blog-post-meta"><time datetime="2015-08-28T10:46:24Z">Fri Aug 28, 2015</time> by cmohn in 
<i class="fa fa-folder" aria-hidden="true"></i>&nbsp;<a href="/categories/vmware" rel="category tag">VMware</a>


<i class="fa fa-tag" aria-hidden="true"></i>&nbsp;<a href="/tags/esxi" rel="tag">ESXi</a>, <a href="/tags/nfs" rel="tag">NFS</a>, <a href="/tags/upgrade" rel="tag">Upgrade</a>, <a href="/tags/vcenter" rel="tag">vCenter</a>, <a href="/tags/veeam-backup-amp-replication" rel="tag">Veeam Backup &amp;amp; Replication</a>, <a href="/tags/vmware" rel="tag">VMware</a>

</p>
  </header>
  

<p>During an upgrade from vSphere 5.1 to 5.5, I ran into a rather strange issue when trying to utilize VMware Update Manager to perform the ESXi upgrade.</p>

<p>During scanning, VUM reported the ESXi host as &ldquo;Incompatible&rdquo;, without offering any other explanation. I spent ages looking through VUM logs, trying to find the culprit, suspecting it was an incompatible VIB. Without finding anything that gave me any indication on what the problem might be, I moved on to looking at the ESXi image I had imported into VUM.</p>

<p>As this was on a Dell PowerEdge R710, I was utilizing the Dell Customized Image of VMware ESXi 5.5 Update 2, which got an updated A02 version last night (27th of August) - I downloaded my image, <strong>VMware-VMvisor-Installer-5.5.0.update02-2068190.x86_64-Dell_Customized-A00.iso</strong> on the 27th, but before the <strong>VMware-VMvisor-Installer-5.5.0.update02-2068190.x86_64-Dell_Customized-A02.iso</strong> image was available. Thinking this would resolve the issue, I imported the new image into VUM, and created a new Upgrade Baseline. Sadly, I was still greeted by the non-gracious &ldquo;Incompatible&rdquo; warning after performing a new scan.</p>

<p>After some more digging, I found the following entry in the Events pane, for the given host, in vCenter:
[cc lang=&ldquo;bash&rdquo; width=&ldquo;100%&rdquo; nowrap=&ldquo;0&rdquo;]Error in ESX configuration file (esx.conf).
error
28.08.2015 11:51:25
Scan entity
[hostname]
[username]
[/cc]</p>

<p>Naturally I go digging into the  <em>/etc/vmware/esx.conf</em> file, and found the following entries:</p>

<p>[cc lang=&ldquo;bash&rdquo; width=&ldquo;100%&rdquo; nowrap=&ldquo;0&rdquo;]
/nas/[oldserver]/readOnly = &ldquo;false&rdquo;
/nas/[oldserver]/enabled = &ldquo;true&rdquo;
/nas/[oldserver]/host = &ldquo;[oldserver.fqdn]&rdquo;
/nas/[oldserver]/share = &ldquo;/VeeamBackup_[oldserver]/&rdquo;
[/cc]</p>

<p>These references to [oldserver] pointed to an old Veeam Backup &amp; Replication server that was decommissioned ages ago. Veeam B&amp;R adds these to a host if vPowerNFS has been used to mount a backup share, and the entries had not been removed when removing the old Veeam B&amp;R server. DNS resolution for the old server failed, as it has been completely removed from the infrastructure, thus causing the VUM update to fail.</p>

<p>Manually removing these lines from <em>/etc/vmware/esx.conf</em> fixed the problem, and VUM was able to scan and remediate without issues.</p>

<h5 id="update">Update:</h5>

<p>After writing this, I saw <a href="http://twitter.com/k00laidIT">Jim Jones</a> had the same experience, for more details <a href="https://koolaid.info/unsupported-configuration-using-vum-major-upgrade/">read his post:
Unsupported Configuration when using VUM for a Major Upgrade</a></p>


  

  
  <hr>
  <footer>

  
    <section>
    <h4>Share</h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=%2fvmware-2%2fvmware-update-manager-unsupported-configuration%2f" title="Share on Facebook"><span class="fa fa-facebook fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://plus.google.com/share?url=%2fvmware-2%2fvmware-update-manager-unsupported-configuration%2f" title="Share on Google+"><span class="fa fa-google-plus fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fvmware-2%2fvmware-update-manager-unsupported-configuration%2f" title="Share on LinkedIn"><span class="fa fa-linkedin fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/home?status=%2fvmware-2%2fvmware-update-manager-unsupported-configuration%2f" title="Tweet this"><span class="fa fa-twitter fa-2x"></span></a>
    </nav>
  </section>

  

  
  </footer>
  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  

  

  
  <section class="sidebar-module">
    <h4>Links</h4>
    <ol class="list-unstyled">
      
      <li><a href="https://example.com">Link 1</a></li>
      
      <li><a href="https://example.org">Link 2</a></li>
      
    </ol>
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p>
      
      &copy; Christian Mohn
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
