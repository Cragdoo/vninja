<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>VMware Update Manager: Unsupported Configuration  &middot; vNinja.net</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="ESXi, NFS, Upgrade, vCenter, Veeam Backup &amp;amp; Replication, VMware, ">

<link rel="author" href="http://plus.google.com/+Myprofile">


<meta property="og:title" content="VMware Update Manager: Unsupported Configuration  &middot; vNinja.net ">
<meta property="og:site_name" content="vNinja.net"/>
<meta property="og:url" content="https://vninja.net/vmware-2/vmware-update-manager-unsupported-configuration/" />
<meta property="og:locale" content="en">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2015-08-28T10:46:24Z" />
<meta property="og:article:modified_time" content="2015-08-28T10:46:24Z" />

  
    
<meta property="og:article:tag" content="ESXi">
    
<meta property="og:article:tag" content="NFS">
    
<meta property="og:article:tag" content="Upgrade">
    
<meta property="og:article:tag" content="vCenter">
    
<meta property="og:article:tag" content="Veeam Backup &amp;amp; Replication">
    
<meta property="og:article:tag" content="VMware">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@h0bbel" />
<meta name="twitter:creator" content="@h0bbel" />
<meta name="twitter:title" content="VMware Update Manager: Unsupported Configuration" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="https://vninja.net/vmware-2/vmware-update-manager-unsupported-configuration/" />
<meta name="twitter:domain" content="https://vninja.net">
  

  
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "VMware Update Manager: Unsupported Configuration",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+Myprofile?rel=author"
    },
    "datePublished": "2015-08-28",
    "description": "",
    "wordCount": 344
  }
</script>
  



<link rel="canonical" href="https://vninja.net/vmware-2/vmware-update-manager-unsupported-configuration/" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://vninja.net/touch-icon-144-precomposed.png">
<link rel="icon" href="https://vninja.net/favicon.png">
<meta name="generator" content="Hugo 0.42.2" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->



    <link rel="stylesheet" href="https://vninja.net/css/bootswatch/yeti/bootstrap.min.css">


<link rel="stylesheet" href="https://vninja.net/css/font-awesome.min.css">
<link rel="stylesheet" href="https://vninja.net/css/style.css">


<link rel="stylesheet" href="https://vninja.net/css/style_custom.css">



  <link rel="stylesheet" href="https://vninja.net/css/highlight/default.css">


  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
  <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
  <script>
  window.addEventListener("load", function(){
  window.cookieconsent.initialise({
    "palette": {
      "popup": {
        "background": "#efefef",
        "text": "#404040"
      },
      "button": {
        "background": "#8ec760",
        "text": "#ffffff"
      }
    },
    "showLink": false,
    "position": "bottom-right"
  })});
  </script>
</script>




</head>
<body data-ng-app="myapp" data-ng-controller="MyController" data-ng-mouseleave="MouseLeave($event)">
    <header id="main-header">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        
        <a class="navbar-brand" href="https://vninja.net/">
          vNinja.net
          
          
          </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            
            
            <li class="">
              
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class='fa fa-bars'></i> About <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    
                      <li class="">
                        <a href="https://vninja.net/about/christian-mohn/"><i class='fa fa-child'></i> About Christian</a>
                      </li>
                    
                  </ul>
              
            </li>
            
            <li class="">
              
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class='fa fa-asterisk'></i> Site Policy <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    
                      <li class="">
                        <a href="https://vninja.net/about/privacy-policy"><i class='fa fa-asterisk'></i> Privacy Policy</a>
                      </li>
                    
                  </ul>
              
            </li>
            
            <li class="">
              
                <a href="https://vninja.net/advertising" >
                  <i class='fa fa-bank'></i>
                  Advertising
                </a>
              
            </li>
            
            <li class="">
              
                <a href="https://vninja.net/post/index.xml" >
                  <i class='fa fa-rss'></i>
                  RSS
                </a>
              
            </li>
            
            
              
          </ul>
        </div>
        
      </div>
    </nav>
  </header>





<div class="container">
  <div class="row">
    <div class="col-sm-9">


      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <div class="title-metas text-center">

    <h1>VMware Update Manager: Unsupported Configuration
</h1>

    <div class="metas">
<small>
  <i class="fa fa-calendar"></i>
  <time datetime="2015-08-28">28 Aug, 2015</time>
</small>


  <small>
    &middot; by Christian Mohn
  
  &middot; Read in about 2 min
  &middot; (344 words)
  &middot; 


  </small>

<div class="margin-10">
  <i class="fa fa-tags"></i>
  
  <a href="https://vninja.net/tags/esxi" class="label label-primary">ESXi</a>
  
  <a href="https://vninja.net/tags/nfs" class="label label-primary">NFS</a>
  
  <a href="https://vninja.net/tags/upgrade" class="label label-primary">Upgrade</a>
  
  <a href="https://vninja.net/tags/vcenter" class="label label-primary">vCenter</a>
  
  <a href="https://vninja.net/tags/veeam-backup-amp-replication" class="label label-primary">Veeam Backup &amp;amp; Replication</a>
  
  <a href="https://vninja.net/tags/vmware" class="label label-primary">VMware</a>
  


</div>

<br>
</div>

  </div>
</div>


      <div class="content">

  

  <p>During an upgrade from vSphere 5.1 to 5.5, I ran into a rather strange issue when trying to utilize VMware Update Manager to perform the ESXi upgrade.</p>

<p>During scanning, VUM reported the ESXi host as &laquo;Incompatible&raquo;, without offering any other explanation. I spent ages looking through VUM logs, trying to find the culprit, suspecting it was an incompatible VIB. Without finding anything that gave me any indication on what the problem might be, I moved on to looking at the ESXi image I had imported into VUM.</p>

<p></p>

<p>As this was on a Dell PowerEdge R710, I was utilizing the Dell Customized Image of VMware ESXi 5.5 Update 2, which got an updated A02 version last night (27th of August) - I downloaded my image, <strong>VMware-VMvisor-Installer-5.5.0.update02-2068190.x86_64-Dell_Customized-A00.iso</strong> on the 27th, but before the <strong>VMware-VMvisor-Installer-5.5.0.update02-2068190.x86_64-Dell_Customized-A02.iso</strong> image was available. Thinking this would resolve the issue, I imported the new image into VUM, and created a new Upgrade Baseline. Sadly, I was still greeted by the non-gracious &laquo;Incompatible&raquo; warning after performing a new scan.</p>

<p>After some more digging, I found the following entry in the Events pane, for the given host, in vCenter:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Error in ESX configuration file <span style="color:#f92672">(</span>esx.conf<span style="color:#f92672">)</span>.
error
<span style="color:#ae81ff">28</span>.08.2015 <span style="color:#ae81ff">11</span>:51:25
Scan entity
<span style="color:#f92672">[</span>hostname<span style="color:#f92672">]</span>
<span style="color:#f92672">[</span>username<span style="color:#f92672">]</span></code></pre></div></p>

<p>Naturally I go digging into the  <em>/etc/vmware/esx.conf</em> file, and found the following entries:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/nas/<span style="color:#f92672">[</span>oldserver<span style="color:#f92672">]</span>/readOnly <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;false&#34;</span>
/nas/<span style="color:#f92672">[</span>oldserver<span style="color:#f92672">]</span>/enabled <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;true&#34;</span>
/nas/<span style="color:#f92672">[</span>oldserver<span style="color:#f92672">]</span>/host <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;[oldserver.fqdn]&#34;</span>
/nas/<span style="color:#f92672">[</span>oldserver<span style="color:#f92672">]</span>/share <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/VeeamBackup_[oldserver]/&#34;</span></code></pre></div>

<p>These references to [oldserver] pointed to an old Veeam Backup &amp; Replication server that was decommissioned ages ago. Veeam B&amp;R adds these to a host if vPowerNFS has been used to mount a backup share, and the entries had not been removed when removing the old Veeam B&amp;R server. DNS resolution for the old server failed, as it has been completely removed from the infrastructure, thus causing the VUM update to fail.</p>

<p>Manually removing these lines from <em>/etc/vmware/esx.conf</em> fixed the problem, and VUM was able to scan and remediate without issues.</p>

<h5 id="update">Update:</h5>

<p>After writing this, I saw <a href="http://twitter.com/k00laidIT">Jim Jones</a> had the same experience, for more details <a href="https://koolaid.info/unsupported-configuration-using-vum-major-upgrade/">read his post:
Unsupported Configuration when using VUM for a Major Upgrade</a></p>
</div>


      <footer>
  


  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="https://vninja.net/vmware-2/update-esxi-embedded-host-client-fling/" title="Update ESXi Embedded Host Client Fling">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="https://vninja.net/news/what-if-its-just-some-crazy-guy-in-a-clown-suit/" title="What if it&#39;s Just Some Crazy Guy in a Clown Suit?">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  

</div>

</footer>

    </div>
    
      <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
        <div>
  

    <div class="section">
      <h4>Sponsors</h4>
      <div class="ads" id="veeam">
        <ins class='dcmads' style='display:inline-block;width:250px;height:250px' data-dcm-placement='N410401.1772869VNINJA.NET/B10464038.145283149' data-dcm-rendering-mode='iframe' data-dcm-https-only data-dcm-resettable-device-id='' data-dcm-app-id=''> <script src='https://www.googletagservices.com/dcm/dcmads.js'></script> </ins>
      </div>
      <div class="ads" id="turbonomic">
        <a href="http://turbonomic.com/resources/hybrid-cloud-intelligent-bursting-aws-microsoft-azure/?utm_source=vninja&amp;utm_medium=banner-ad&amp;utm_campaign=wp-path-to-hybrid-cloud&amp;">
          <img width="250" height="250" src="https://vninja.net/ads/wp-intelligent-bursting-aws-azure-250x250.png"></a>
      </div>
      <div class="ads" id="goliath">
        <a href="http://goliathtechnologies.com/performance-monitoring/application-desktop-virtualization/vmware-horizon-view-monitoring/?utm_source=VNINJA&#038;utm_medium=PARTNER-MKTG&#038;utm_campaign=PARTNER-MKTG-VNINJA"><img width="250" height="250" src='https://vninja.net/ads/VMwareHorizon.jpg' alt='' title='VMwareHorizon' /></a>
      </div>
      <div class="ads" id="vembu">
        <a href="https://www.vembu.com/free-vm-backup/?utm_source=vninja.net&#038;utm_medium=Banner"><img width="250" height="250" src='https://vninja.net/ads/vembu250-250.gif'/></a>
      </div>


    </div>

    <hr>
    
      
      
      <div class="section">


      </div>
      
    
      
      
      <div class="section">


      </div>
      
    

</div>

      </div>
    
  </div>
</div>
    
<footer class="footer hidden-print">
  <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <div class="pull-left">
  <a class="toplink" href="javascript:" id="return-to-top">back to top</a>
</div>
<div class="pull-right">

<a href="https://vninja.net/disclaimer/">Disclaimer</a> <i>&middot;</i>

</div>

        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
              
    
<div class="container footline">
    <small>
  Built with Hugo and lots of <i class='fa fa-coffee'></i>

</small>
</div>


    
<div class="container copyright">
    <small>
  &copy; 2018 Christian Mohn

  </small>
</div>




        </div>
    </div>
  </div>
</footer>

    

<script src="https://vninja.net/js/jquery.min.js"></script>
<script src="https://vninja.net/js/bootstrap.min.js"></script>


<script src="https://vninja.net/js/highlight.pack.js"></script>
<script src="https://vninja.net/js/site.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
  var _gaq=[['_setAccount','UA-121910549-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script>
var ENABLE_POPOVER = "", 
EXPIRE_COOKIE = "", 
SHOW_MODAL_TIMEOUT = "", 
MOUSE_LEAVE = "", 
MODAL_SIZE = "", 
POST_URL = "", 
SIGNUP_HEADER = "",
HEADER_IMAGE = "",
IMG_DESCRIPTION = "",
SIGNUP_TEXT = "",
INPUT_PLACEHOLDER = "",
SUBMIT_BUTTON = "",
SUCCESS_MESSAGE = "",
ERROR_MESSAGE = "",
OPTIN = "",
COOKIE_NAME = "",
CONTENTLANGUAGE = ""; 
</script>










  </body>
</html>

