<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Root Cause of Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)" />
<meta property="og:description" content="While working on reconfiguring my home lab setup, and migrating all the vSphere resources into a single cluster I ran into a problem powering on one of the VMs which used to run on a single host. The power on operation yielded the following error message:
Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize) [showhide type=&ldquo;errorstack&rdquo; more_text=&ldquo;Show error stack (%s More Words)&rdquo;]
  **Task Details:**         Status:    Invalid memory setting: memory reservation (sched." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/vmware-2/root-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize/" />



<meta property="article:published_time" content="2014-07-15T10:59:42&#43;00:00"/>

<meta property="article:modified_time" content="2014-07-15T10:59:42&#43;00:00"/>











<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Root Cause of Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)"/>
<meta name="twitter:description" content="While working on reconfiguring my home lab setup, and migrating all the vSphere resources into a single cluster I ran into a problem powering on one of the VMs which used to run on a single host. The power on operation yielded the following error message:
Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize) [showhide type=&ldquo;errorstack&rdquo; more_text=&ldquo;Show error stack (%s More Words)&rdquo;]
  **Task Details:**         Status:    Invalid memory setting: memory reservation (sched."/>
<meta name="generator" content="Hugo 0.40.3" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Root Cause of Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)",
  "url": "/vmware-2/root-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize/",
  "wordCount": "415",
  "datePublished": "2014-07-15T10:59:42&#43;00:00",
  "dateModified": "2014-07-15T10:59:42&#43;00:00",
  "author": {
    "@type": "Person",
    "name": "cmohn"
  },
  "keywords": "VMware, 5.5, ESXi, Latency Sensitivity, Troubleshooting, vCenter, VM"
}
</script>



    <link rel="canonical" href="/vmware-2/root-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize/">

    <title>Root Cause of Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize) | Adventures in Hugo</title>

    <!-- combined, minified CSS -->
    <link href="/css/style.css" rel="stylesheet" integrity="sha384-NnQTHLV1boeEOT&#43;VkddkaZe9ipwgoxh1CLY2U3LM36/GQpTS/1l4lL/5LnWh02Wk" crossorigin="anonymous">

    

    

    

    

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="/">Home</a>
          
          <a class="nav-link" href="https://example.org" title="">Link 1</a>
          
        </nav>
      </div>
    </div>
    

    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title"><a href="/" rel="home">Adventures in Hugo</a></h1>
        <p class="lead blog-description">There is a thin line between agile and fragile</p>
      </div>
    </header>
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title"><a href="/vmware-2/root-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize/">Root Cause of Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)</a></h2>
    <p class="blog-post-meta"><time datetime="2014-07-15T10:59:42Z">Tue Jul 15, 2014</time> by cmohn in 
<i class="fa fa-folder" aria-hidden="true"></i>&nbsp;<a href="/categories/vmware" rel="category tag">VMware</a>


<i class="fa fa-tag" aria-hidden="true"></i>&nbsp;<a href="/tags/5.5" rel="tag">5.5</a>, <a href="/tags/esxi" rel="tag">ESXi</a>, <a href="/tags/latency-sensitivity" rel="tag">Latency Sensitivity</a>, <a href="/tags/troubleshooting" rel="tag">Troubleshooting</a>, <a href="/tags/vcenter" rel="tag">vCenter</a>, <a href="/tags/vm" rel="tag">VM</a>, <a href="/tags/vmware" rel="tag">VMware</a>

</p>
  </header>
  <p><a href="http://vninja.net/wordpress/wp-content/uploads/2014/07/Screenshot-2014-07-12-20.04.31.png"><img src="http://vninja.net/wordpress/wp-content/uploads/2014/07/Screenshot-2014-07-12-20.04.31-300x168.png" alt="Screenshot 2014-07-12 20.04.31" /></a>While working on reconfiguring my home lab setup, and migrating all the vSphere resources into a single cluster I ran into a problem powering on one of the VMs which used to run on a single host. The power on operation yielded the following error message:</p>

<p><strong><em>Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)</em></strong>
[showhide type=&ldquo;errorstack&rdquo; more_text=&ldquo;Show error stack (%s More Words)&rdquo;]</p>

<blockquote>
<table border="0" >
<tbody >
<tr >

> <td colspan="2" >**Task Details:**
> </td>
</tr>
<tr >

> <td >
> </td>

> <td >
<table border="0" >
<tbody >
<tr >

> <td valign="top" >Status:
> </td>

> <td >Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize(4096).
> </td>
</tr>
<tr >

> <td valign="top" >Start Time:
> </td>

> <td >Jul 12, 2014 4:22:21 PM
> </td>
</tr>
<tr >

> <td valign="top" >Completed Time:
> </td>

> <td >Jul 12, 2014 4:22:23 PM
> </td>
</tr>
<tr >

> <td valign="top" >State:
> </td>

> <td >error
> </td>
</tr>
</tbody>
</table>

> </td>
</tr>
<tr >

> <td colspan="2" >**Error Stack:**
> </td>
</tr>
<tr >

> <td >
> </td>

> <td >

> 
> ![](https://192.168.5.12:9443/vsphere-client/errorReport/assets/errorStack.png) An error was received from the ESX host while powering on VM MinecraftServer.
> 
> 

> 
> ![](https://192.168.5.12:9443/vsphere-client/errorReport/assets/errorStack.png) Failed to start the virtual machine.
> 
> 

> 
> ![](https://192.168.5.12:9443/vsphere-client/errorReport/assets/errorStack.png) Module MemSched power on failed.
> 
> 

> 
> ![](https://192.168.5.12:9443/vsphere-client/errorReport/assets/errorStack.png) An error occurred while parsing scheduler-specific configuration parameters.
> 
> 

> 
> ![](https://192.168.5.12:9443/vsphere-client/errorReport/assets/errorStack.png) Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize(4096).
> 
> </td>
</tr>
<tr >

> <td colspan="2" >**Additional Task Details:**
> </td>
</tr>
<tr >

> <td >
> </td>

> <td >
<table border="0" >
<tbody >
<tr >

> <td valign="top" >VC Build:
> </td>

> <td >1476327
> </td>
</tr>
<tr >

> <td valign="top" >Error Type:
> </td>

> <td >GenericVmConfigFault
> </td>
</tr>
<tr >

> <td valign="top" >Task Id:
> </td>

> <td >Task
> </td>
</tr>
<tr >

> <td valign="top" >Cancelable:
> </td>

> <td >false
> </td>
</tr>
<tr >

> <td valign="top" >Canceled:
> </td>

> <td >false
> </td>
</tr>
<tr >

> <td valign="top" >Description Id:
> </td>

> <td >Datacenter.ExecuteVmPowerOnLRO
> </td>
</tr>
<tr >

> <td valign="top" >Event Chain Id:
> </td>

> <td >20017
> </td>
</tr>
</tbody>
</table>

> </td>
</tr>
</tbody>
</table>
</blockquote>

<p>[/showhide]</p>

<p>Clearly there was an issue with memory reservations on the VM, but there was no memory reservation enabled on it at all, nor should there be. The only related errors I found while investigating the issue, was with regards to <a href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=2002779">pass-through devices,</a> which also did not apply in this case. It turns out that the problem was due to the VM was configured to use the latency sensitivity feature introduced in vSphere 5.5.</p>

<p>The <a href="http://www.vmware.com/files/pdf/techpaper/latency-sensitive-perf-vsphere55.pdf">Deploying Extremely Latency-Sensitive Applications in VMware vSphere 5.5</a> whitepaper from VMware clearly states that usage of this feature also demands a memory reservation being set on the VM, and this VM had no reservation.</p>

<blockquote>Enabling the latency-sensitivity feature requires memory reservation.</blockquote>

<p><strong>In the end, the solution was a simple one, revert the latency <a href="http://vninja.net/wordpress/wp-content/uploads/2014/07/Screenshot-2014-07-12-21.10.12.png"><img src="http://vninja.net/wordpress/wp-content/uploads/2014/07/Screenshot-2014-07-12-21.10.12-300x168.png" alt="Screenshot 2014-07-12 21.10.12" /></a>sensitivity advanced option for the VM to the default value of <em>Normal</em> let me power-on the VM again without issues.</strong></p>

<p>The error message received in vCenter could be a lot clearer though, and a knowledge base article with the exact error message and resolution paths might be in order. It was not immediately obvious that the lack of memory reservation error message was related to the latency sensitivity settings for the given VM. The vSphere Web Client shows a warning that you should check the CPU reservations, but does not mention memory reservations when you enable this feature.</p>

<p>Now I just need to figure out why my home MineCraft server had that setting enabled in the first place&hellip;</p>


  

  
  <hr>
  <footer>

  
    <section>
    <h4>Share</h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=%2fvmware-2%2froot-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize%2f" title="Share on Facebook"><span class="fa fa-facebook fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://plus.google.com/share?url=%2fvmware-2%2froot-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize%2f" title="Share on Google+"><span class="fa fa-google-plus fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fvmware-2%2froot-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize%2f" title="Share on LinkedIn"><span class="fa fa-linkedin fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/home?status=%2fvmware-2%2froot-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize%2f" title="Tweet this"><span class="fa fa-twitter fa-2x"></span></a>
    </nav>
  </section>

  

  
  </footer>
  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  

  

  
  <section class="sidebar-module">
    <h4>Links</h4>
    <ol class="list-unstyled">
      
      <li><a href="https://example.com">Link 1</a></li>
      
      <li><a href="https://example.org">Link 2</a></li>
      
    </ol>
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p>
      
      &copy; Christian Mohn
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
