<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Root Cause of Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)  &middot; Adventures in Hugo</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="There is a thin line between agile and fragile" />

<meta name="keywords" content="5.5, ESXi, Latency Sensitivity, Troubleshooting, vCenter, VM, VMware, ">


<meta property="og:title" content="Root Cause of Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)  &middot; Adventures in Hugo ">
<meta property="og:site_name" content="Adventures in Hugo"/>
<meta property="og:url" content="/vmware-2/root-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2014-07-15T10:59:42Z" />
<meta property="og:article:modified_time" content="2014-07-15T10:59:42Z" />

  
    
<meta property="og:article:tag" content="5.5">
    
<meta property="og:article:tag" content="ESXi">
    
<meta property="og:article:tag" content="Latency Sensitivity">
    
<meta property="og:article:tag" content="Troubleshooting">
    
<meta property="og:article:tag" content="vCenter">
    
<meta property="og:article:tag" content="VM">
    
<meta property="og:article:tag" content="VMware">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />
<meta name="twitter:title" content="Root Cause of Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="/vmware-2/root-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize/" />
<meta name="twitter:domain" content="/">
  

  
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Root Cause of Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2014-07-15",
    "description": "",
    "wordCount": 415
  }
</script>
  



<link rel="canonical" href="/vmware-2/root-invalid-memory-setting-memory-reservation-sched-mem-min-equal-memsize-memsize/" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
<link rel="icon" href="/favicon.png">
<meta name="generator" content="Hugo 0.40.3" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->



    <link rel="stylesheet" href="/css/bootswatch/default/bootstrap.min.css">


<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css">




  <link rel="stylesheet" href="/css/highlight/default.css">


</head>
<body data-ng-app="myapp" data-ng-controller="MyController" data-ng-mouseleave="MouseLeave($event)">
    <header id="main-header">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        
          
          <a class="navbar-brand-img" href="/">
            <img alt="" src="">
            
          </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            
            
            
              
          </ul>
        </div>
        
      </div>
    </nav>
  </header>





<div class="container">
  <div class="row">
    <div class="col-sm-12">


      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" >
<header class="container hat">
  <h1>Root Cause of Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)
</h1>

</header>
</div>


      <div class="content">
  <p><a href="http://vninja.net/wordpress/wp-content/uploads/2014/07/Screenshot-2014-07-12-20.04.31.png"><img src="http://vninja.net/wordpress/wp-content/uploads/2014/07/Screenshot-2014-07-12-20.04.31-300x168.png" alt="Screenshot 2014-07-12 20.04.31" /></a>While working on reconfiguring my home lab setup, and migrating all the vSphere resources into a single cluster I ran into a problem powering on one of the VMs which used to run on a single host. The power on operation yielded the following error message:</p>

<p><strong><em>Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize (memsize)</em></strong>
[showhide type=&ldquo;errorstack&rdquo; more_text=&ldquo;Show error stack (%s More Words)&rdquo;]</p>

<blockquote>
<table border="0" >
<tbody >
<tr >

> <td colspan="2" >**Task Details:**
> </td>
</tr>
<tr >

> <td >
> </td>

> <td >
<table border="0" >
<tbody >
<tr >

> <td valign="top" >Status:
> </td>

> <td >Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize(4096).
> </td>
</tr>
<tr >

> <td valign="top" >Start Time:
> </td>

> <td >Jul 12, 2014 4:22:21 PM
> </td>
</tr>
<tr >

> <td valign="top" >Completed Time:
> </td>

> <td >Jul 12, 2014 4:22:23 PM
> </td>
</tr>
<tr >

> <td valign="top" >State:
> </td>

> <td >error
> </td>
</tr>
</tbody>
</table>

> </td>
</tr>
<tr >

> <td colspan="2" >**Error Stack:**
> </td>
</tr>
<tr >

> <td >
> </td>

> <td >

> 
> ![](https://192.168.5.12:9443/vsphere-client/errorReport/assets/errorStack.png) An error was received from the ESX host while powering on VM MinecraftServer.
> 
> 

> 
> ![](https://192.168.5.12:9443/vsphere-client/errorReport/assets/errorStack.png) Failed to start the virtual machine.
> 
> 

> 
> ![](https://192.168.5.12:9443/vsphere-client/errorReport/assets/errorStack.png) Module MemSched power on failed.
> 
> 

> 
> ![](https://192.168.5.12:9443/vsphere-client/errorReport/assets/errorStack.png) An error occurred while parsing scheduler-specific configuration parameters.
> 
> 

> 
> ![](https://192.168.5.12:9443/vsphere-client/errorReport/assets/errorStack.png) Invalid memory setting: memory reservation (sched.mem.min) should be equal to memsize(4096).
> 
> </td>
</tr>
<tr >

> <td colspan="2" >**Additional Task Details:**
> </td>
</tr>
<tr >

> <td >
> </td>

> <td >
<table border="0" >
<tbody >
<tr >

> <td valign="top" >VC Build:
> </td>

> <td >1476327
> </td>
</tr>
<tr >

> <td valign="top" >Error Type:
> </td>

> <td >GenericVmConfigFault
> </td>
</tr>
<tr >

> <td valign="top" >Task Id:
> </td>

> <td >Task
> </td>
</tr>
<tr >

> <td valign="top" >Cancelable:
> </td>

> <td >false
> </td>
</tr>
<tr >

> <td valign="top" >Canceled:
> </td>

> <td >false
> </td>
</tr>
<tr >

> <td valign="top" >Description Id:
> </td>

> <td >Datacenter.ExecuteVmPowerOnLRO
> </td>
</tr>
<tr >

> <td valign="top" >Event Chain Id:
> </td>

> <td >20017
> </td>
</tr>
</tbody>
</table>

> </td>
</tr>
</tbody>
</table>
</blockquote>

<p>[/showhide]</p>

<p>Clearly there was an issue with memory reservations on the VM, but there was no memory reservation enabled on it at all, nor should there be. The only related errors I found while investigating the issue, was with regards to <a href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=2002779">pass-through devices,</a> which also did not apply in this case. It turns out that the problem was due to the VM was configured to use the latency sensitivity feature introduced in vSphere 5.5.</p>

<p>The <a href="http://www.vmware.com/files/pdf/techpaper/latency-sensitive-perf-vsphere55.pdf">Deploying Extremely Latency-Sensitive Applications in VMware vSphere 5.5</a> whitepaper from VMware clearly states that usage of this feature also demands a memory reservation being set on the VM, and this VM had no reservation.</p>

<blockquote>Enabling the latency-sensitivity feature requires memory reservation.</blockquote>

<p><strong>In the end, the solution was a simple one, revert the latency <a href="http://vninja.net/wordpress/wp-content/uploads/2014/07/Screenshot-2014-07-12-21.10.12.png"><img src="http://vninja.net/wordpress/wp-content/uploads/2014/07/Screenshot-2014-07-12-21.10.12-300x168.png" alt="Screenshot 2014-07-12 21.10.12" /></a>sensitivity advanced option for the VM to the default value of <em>Normal</em> let me power-on the VM again without issues.</strong></p>

<p>The error message received in vCenter could be a lot clearer though, and a knowledge base article with the exact error message and resolution paths might be in order. It was not immediately obvious that the lack of memory reservation error message was related to the latency sensitivity settings for the given VM. The vSphere Web Client shows a warning that you should check the CPU reservations, but does not mention memory reservations when you enable this feature.</p>

<p>Now I just need to figure out why my home MineCraft server had that setting enabled in the first place&hellip;</p>

</div>


      
    </div>
    
  </div>
</div>
    
<footer class="footer hidden-print">
  <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <div class="pull-left">
  <a class="toplink" href="javascript:" id="return-to-top">back to top</a>
</div>
<div class="pull-right">

</div>

        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
              
    
<div class="container footline">
    <small>
</small>
</div>


    
<div class="container copyright">
    <small>
  &copy; Christian Mohn

  </small>
</div>



        </div>
    </div>
  </div>
</footer>

    

<script src="//s3.amazonaws.com/mailmunch/static/site.js" id="mailmunch-script" data-mailmunch-site-id="" async="async"></script>



<script src="//load.sumome.com/" data-sumo-site-id="" async="async"></script>

<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>


<script src="/js/highlight.pack.js"></script>
<script src="/js/site.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
var ENABLE_POPOVER = "", 
EXPIRE_COOKIE = "", 
SHOW_MODAL_TIMEOUT = "", 
MOUSE_LEAVE = "", 
MODAL_SIZE = "", 
POST_URL = "", 
SIGNUP_HEADER = "",
HEADER_IMAGE = "",
IMG_DESCRIPTION = "",
SIGNUP_TEXT = "",
INPUT_PLACEHOLDER = "",
SUBMIT_BUTTON = "",
SUCCESS_MESSAGE = "",
ERROR_MESSAGE = "",
OPTIN = "",
COOKIE_NAME = "",
CONTENTLANGUAGE = ""; 
</script>





<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax//MathJax.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax//config/TeX-AMS-MML_HTMLorMML.js"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    for(var all in MathJax.Hub.getAllJax()) {
        all.SourceElement().parentNode.className += ' has-jax';

    }
});
</script>






  </body>
</html>

