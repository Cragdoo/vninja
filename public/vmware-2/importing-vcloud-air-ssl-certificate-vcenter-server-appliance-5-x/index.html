<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Importing vCloud Air SSL Certificate on the vCenter Server Appliance 5.x" />
<meta property="og:description" content="I&rsquo;m playing around a bit with vCloud Air and Virtual Private Cloud OnDemand, and in order to set up the vCloud Hybrid Service plugin in the vSphere Web Client you need to import the vCloud Air SSL certificate into vCenter. If the certificate isn&rsquo;t present in the vCSA keystore when you try to authenticate with vCloud Air, you get a &ldquo;Server Certificate not Verified&rdquo; error, and you will be unsuccessful in configuring the plugin." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/vmware-2/importing-vcloud-air-ssl-certificate-vcenter-server-appliance-5-x/" />



<meta property="article:published_time" content="2014-12-12T12:24:55&#43;00:00"/>

<meta property="article:modified_time" content="2014-12-12T12:24:55&#43;00:00"/>











<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Importing vCloud Air SSL Certificate on the vCenter Server Appliance 5.x"/>
<meta name="twitter:description" content="I&rsquo;m playing around a bit with vCloud Air and Virtual Private Cloud OnDemand, and in order to set up the vCloud Hybrid Service plugin in the vSphere Web Client you need to import the vCloud Air SSL certificate into vCenter. If the certificate isn&rsquo;t present in the vCSA keystore when you try to authenticate with vCloud Air, you get a &ldquo;Server Certificate not Verified&rdquo; error, and you will be unsuccessful in configuring the plugin."/>
<meta name="generator" content="Hugo 0.40.3" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Importing vCloud Air SSL Certificate on the vCenter Server Appliance 5.x",
  "url": "/vmware-2/importing-vcloud-air-ssl-certificate-vcenter-server-appliance-5-x/",
  "wordCount": "278",
  "datePublished": "2014-12-12T12:24:55&#43;00:00",
  "dateModified": "2014-12-12T12:24:55&#43;00:00",
  "author": {
    "@type": "Person",
    "name": "cmohn"
  },
  "keywords": "VMware, Certificate, SSL, vCenter, vCenter Web Client, vCloud Air, VCSA"
}
</script>



    <link rel="canonical" href="/vmware-2/importing-vcloud-air-ssl-certificate-vcenter-server-appliance-5-x/">

    <title>Importing vCloud Air SSL Certificate on the vCenter Server Appliance 5.x | Adventures in Hugo</title>

    <!-- combined, minified CSS -->
    <link href="/css/style.css" rel="stylesheet" integrity="sha384-NnQTHLV1boeEOT&#43;VkddkaZe9ipwgoxh1CLY2U3LM36/GQpTS/1l4lL/5LnWh02Wk" crossorigin="anonymous">

    

    

    

    

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="/">Home</a>
          
          <a class="nav-link" href="https://example.org" title="">Link 1</a>
          
        </nav>
      </div>
    </div>
    

    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title"><a href="/" rel="home">Adventures in Hugo</a></h1>
        <p class="lead blog-description">There is a thin line between agile and fragile</p>
      </div>
    </header>
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title"><a href="/vmware-2/importing-vcloud-air-ssl-certificate-vcenter-server-appliance-5-x/">Importing vCloud Air SSL Certificate on the vCenter Server Appliance 5.x</a></h2>
    <p class="blog-post-meta"><time datetime="2014-12-12T12:24:55Z">Fri Dec 12, 2014</time> by cmohn in 
<i class="fa fa-folder" aria-hidden="true"></i>&nbsp;<a href="/categories/vmware" rel="category tag">VMware</a>


<i class="fa fa-tag" aria-hidden="true"></i>&nbsp;<a href="/tags/certificate" rel="tag">Certificate</a>, <a href="/tags/ssl" rel="tag">SSL</a>, <a href="/tags/vcenter" rel="tag">vCenter</a>, <a href="/tags/vcenter-web-client" rel="tag">vCenter Web Client</a>, <a href="/tags/vcloud-air" rel="tag">vCloud Air</a>, <a href="/tags/vcsa" rel="tag">VCSA</a>

</p>
  </header>
  <p>I&rsquo;m playing around a bit with vCloud Air and Virtual Private Cloud OnDemand, and in order to set up the vCloud Hybrid Service plugin in the vSphere Web Client you need to import the vCloud Air SSL certificate into vCenter. If the certificate isn&rsquo;t present in the vCSA keystore when you try to authenticate with vCloud Air, you get a &ldquo;<strong>Server Certificate not Verified</strong>&rdquo; error, and you will be unsuccessful in configuring the plugin.</p>

<p>The <a href="http://pubs.vmware.com/vchsplugin-10/topic/com.vmware.ICbase/PDF/vchs_plugin_using.pdf">Using the vCloud Hybrid Service vSphere Client Plug-in document</a> outlines how this can be accomplished, but it&rsquo;s based on downloading the SSL certificate via a browser and then importing it into the vCenter Keystore. Since I mostly run the vCenter Server Appliance, I didn&rsquo;t want to bother with downloading it from one of my desktops, and copying the files over to the vCSA for import.</p>

<p>I mean, there has to be a better way to do that, via the command line, right? Indeed there is, this little one-liner downloads and formats the certificate from <a href="http://vchs.vmware.com">vchs.vmware.com</a> to /tmp on the vCSA, and then proceeds to import it into the keystore.</p>

<p>[cc lang=&ldquo;bash&rdquo; width=&ldquo;100%&rdquo; theme=&ldquo;blackboard&rdquo; nowrap=&ldquo;0&rdquo;]
echo -n | openssl s_client -connect vchs.vmware.com:443 | sed -ne &lsquo;/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p&rsquo; &gt; /tmp/vchs.cer &amp;&amp; /usr/java/jre-vmware/bin/keytool -alias vchs -v -keystore /usr/lib/vmware-vsphere-client/server/configuration/keystore -storepass changeit -import -file /tmp/vchs.cer
[/cc]</p>

<p>All you have to to is press &lsquo;y&rsquo; to confirm the import:
[cc lang=&ldquo;bash&rdquo; width=&ldquo;100%&rdquo; theme=&ldquo;blackboard&rdquo; nowrap=&ldquo;1&rdquo;]
Trust this certificate? [no]: y
Certificate was added to keystore
[Storing /usr/lib/vmware-vsphere-client/server/configuration/keystore]
vcenter:/tmp #
[/cc]</p>

<p>And there it is, you can now add your vCloud Air credentials via the vSphere Web Client, without having to copy any files from your browser/desktop to the vCSA.</p>


  

  
  <hr>
  <footer>

  
    <section>
    <h4>Share</h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=%2fvmware-2%2fimporting-vcloud-air-ssl-certificate-vcenter-server-appliance-5-x%2f" title="Share on Facebook"><span class="fa fa-facebook fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://plus.google.com/share?url=%2fvmware-2%2fimporting-vcloud-air-ssl-certificate-vcenter-server-appliance-5-x%2f" title="Share on Google+"><span class="fa fa-google-plus fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fvmware-2%2fimporting-vcloud-air-ssl-certificate-vcenter-server-appliance-5-x%2f" title="Share on LinkedIn"><span class="fa fa-linkedin fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/home?status=%2fvmware-2%2fimporting-vcloud-air-ssl-certificate-vcenter-server-appliance-5-x%2f" title="Tweet this"><span class="fa fa-twitter fa-2x"></span></a>
    </nav>
  </section>

  

  
  </footer>
  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  

  

  
  <section class="sidebar-module">
    <h4>Links</h4>
    <ol class="list-unstyled">
      
      <li><a href="https://example.com">Link 1</a></li>
      
      <li><a href="https://example.org">Link 2</a></li>
      
    </ol>
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p>
      
      &copy; Christian Mohn
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
