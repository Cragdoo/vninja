<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Dynamic DNS Requirements" />
<meta property="og:description" content="While working on my new Homelab setup, I&rsquo;ve been investigating ways to provide hostname based access to several web services located in my DMZ zone. Since my provider doesn&rsquo;t provide static IP addresses, I also need an external Dynamic DNS service, to provide said hostname mappings through the reverse proxy on the inside.
There are loads of Dynamic DNS services available, most of them lets you use some sort of predefined domain name scheme, and point it to your external IP, but I wanted to use a domain name that I own and control." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/homelab/dynamic-dns-requirements/" />



<meta property="article:published_time" content="2016-08-09T22:18:57&#43;00:00"/>

<meta property="article:modified_time" content="2016-08-09T22:18:57&#43;00:00"/>











<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dynamic DNS Requirements"/>
<meta name="twitter:description" content="While working on my new Homelab setup, I&rsquo;ve been investigating ways to provide hostname based access to several web services located in my DMZ zone. Since my provider doesn&rsquo;t provide static IP addresses, I also need an external Dynamic DNS service, to provide said hostname mappings through the reverse proxy on the inside.
There are loads of Dynamic DNS services available, most of them lets you use some sort of predefined domain name scheme, and point it to your external IP, but I wanted to use a domain name that I own and control."/>
<meta name="generator" content="Hugo 0.40.3" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Dynamic DNS Requirements",
  "url": "/homelab/dynamic-dns-requirements/",
  "wordCount": "362",
  "datePublished": "2016-08-09T22:18:57&#43;00:00",
  "dateModified": "2016-08-09T22:18:57&#43;00:00",
  "author": {
    "@type": "Person",
    "name": "cmohn"
  },
  "keywords": "Homelab, Cloudflare, DNS, Dynamic DNS, Scripting"
}
</script>



    <link rel="canonical" href="/homelab/dynamic-dns-requirements/">

    <title>Dynamic DNS Requirements | Adventures in Hugo</title>

    <!-- combined, minified CSS -->
    <link href="/css/style.css" rel="stylesheet" integrity="sha384-TbfEhJn4HkgPUIZUhhHaAYsycYKHxSuIloCjZOiyCSpbVunRQxg5T5pxKVFwxilF" crossorigin="anonymous">

    

    

    

    

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="/">Home</a>
          
          <a class="nav-link" href="https://example.org" title="">Link 1</a>
          
        </nav>
      </div>
    </div>
    

    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title"><a href="/" rel="home">Adventures in Hugo</a></h1>
        <p class="lead blog-description">There is a thin line between agile and fragile</p>
      </div>
    </header>
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title"><a href="/homelab/dynamic-dns-requirements/">Dynamic DNS Requirements</a></h2>
    <p class="blog-post-meta"><time datetime="2016-08-09T22:18:57Z">Tue Aug 09, 2016</time> by cmohn in 
<i class="fa fa-folder" aria-hidden="true"></i>&nbsp;<a href="/categories/homelab" rel="category tag">Homelab</a>


<i class="fa fa-tag" aria-hidden="true"></i>&nbsp;<a href="/tags/cloudflare" rel="tag">Cloudflare</a>, <a href="/tags/dns" rel="tag">DNS</a>, <a href="/tags/dynamic-dns" rel="tag">Dynamic DNS</a>, <a href="/tags/homelab" rel="tag">Homelab</a>, <a href="/tags/scripting" rel="tag">Scripting</a>

</p>
  </header>
  

<p>While working on my new <a href="http://vninja.net/news/taking-it-to-far/">Homelab</a> setup, I&rsquo;ve been investigating ways to provide hostname based access to several web services located in my DMZ zone. Since my provider doesn&rsquo;t provide static IP addresses, I also need an external Dynamic DNS service, to provide said hostname mappings through the reverse proxy on the inside.</p>

<p>There are loads of Dynamic DNS services available, most of them lets you use some sort of predefined domain name scheme, and point it to your external IP, but I wanted to use a domain name that I own and control. Since I use <a href="https://cloudflare.com">CloudFlare</a> to provide DNS services (amongst other things) for this very site, it was a natural choice to see if they could fit the bill for my lab needs as well. Turns out, not only can they provide the services I need for free, they also allow me to play around and have fun at the same time!</p>

<h5 id="my-setup-looks-like-this">My setup looks like this:</h5>

<p>[caption id=&ldquo;attachment_4170&rdquo; align=&ldquo;alignleft&rdquo; width=&ldquo;357&rdquo;]<img src="http://vninja.net/wordpress/wp-content/uploads/2016/08/conceptualOutsideAcess2.png" alt="Logical Web Services Access Diagram" /> Logical Web Services Access Diagram[/caption]</p>

<p>As seen in the diagram, the setup is pretty simple. As far as Dynamic DNS requirements go, all I need to be able to do (for now) is to update the IP address for a couple of <a href="https://support.dnsimple.com/articles/a-record/">A records</a> for my domain, if my external IP changes.  This in turn makes the reverse proxy work, since it redirects traffic based on hostname when there is an incoming request.</p>

<p>CloudFlare offers several methods to update the records, including <a href="https://www.cloudflare.com/resources-downloads/">ddclient</a>, but that requires Perl, and frankly that&rsquo;s no fun at all. What it fun however, is to update A records directly through the <a href="https://api.cloudflare.com">CloudFlare API</a>, so that&rsquo;s the route I headed down.</p>

<p>I moved the domain name I want to use for external access to my lab, to CloudFlare and rolled my own small Dynamic DNS Updater all within an hour or so of actual work.</p>

<p>Not bad at all, especially considering I didn&rsquo;t even know they provided the possibility to do so, or that they provide a public API you can play with.</p>

<p>In the next post in this series, I&rsquo;ll show how <a href="http://vninja.net/homelab/using-cloudflare-for-dynamic-dns/">I solved it with some simple API calls and some bash scripting.</a></p>


  

  
  <hr>
  <footer>

  
    <section>
    <h4>Share</h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=%2fhomelab%2fdynamic-dns-requirements%2f" title="Share on Facebook"><span class="fa fa-facebook fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://plus.google.com/share?url=%2fhomelab%2fdynamic-dns-requirements%2f" title="Share on Google+"><span class="fa fa-google-plus fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fhomelab%2fdynamic-dns-requirements%2f" title="Share on LinkedIn"><span class="fa fa-linkedin fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/home?status=%2fhomelab%2fdynamic-dns-requirements%2f" title="Tweet this"><span class="fa fa-twitter fa-2x"></span></a>
    </nav>
  </section>

  

  
  </footer>
  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  

  

  
  <section class="sidebar-module">
    <h4>Links</h4>
    <ol class="list-unstyled">
      
      <li><a href="https://example.com">Link 1</a></li>
      
      <li><a href="https://example.org">Link 2</a></li>
      
    </ol>
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p>
      
      &copy; Christian Mohn
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
