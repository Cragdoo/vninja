<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Applescript, Desktop Wallpaper and Growl. Automagically." />
<meta property="og:description" content="I´ve been a Mac and OS X user now for about 7 months, but to be honest I have not been very experimental in my usage of my Macbook Air. Until now, my main focus has been basic usage of the hardware and operating systems, and making it work in my corporate environment. As I feel that I´ve reached mission accomplished status on that initial project, I decided to use some of my &ldquo;free&rdquo; vacation time to play around a bit and experiment a bit more." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/osx/applescript-desktop-wallpaper-growl-automatically/" />



<meta property="article:published_time" content="2012-07-24T23:31:12&#43;00:00"/>

<meta property="article:modified_time" content="2012-07-24T23:31:12&#43;00:00"/>











<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Applescript, Desktop Wallpaper and Growl. Automagically."/>
<meta name="twitter:description" content="I´ve been a Mac and OS X user now for about 7 months, but to be honest I have not been very experimental in my usage of my Macbook Air. Until now, my main focus has been basic usage of the hardware and operating systems, and making it work in my corporate environment. As I feel that I´ve reached mission accomplished status on that initial project, I decided to use some of my &ldquo;free&rdquo; vacation time to play around a bit and experiment a bit more."/>
<meta name="generator" content="Hugo 0.40.3" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Applescript, Desktop Wallpaper and Growl. Automagically.",
  "url": "/osx/applescript-desktop-wallpaper-growl-automatically/",
  "wordCount": "749",
  "datePublished": "2012-07-24T23:31:12&#43;00:00",
  "dateModified": "2012-07-24T23:31:12&#43;00:00",
  "author": {
    "@type": "Person",
    "name": "cmohn"
  },
  "keywords": "OS X, Applescript, automation, fun, Mac, Scripting"
}
</script>



    <link rel="canonical" href="/osx/applescript-desktop-wallpaper-growl-automatically/">

    <title>Applescript, Desktop Wallpaper and Growl. Automagically. | Adventures in Hugo</title>

    <!-- combined, minified CSS -->
    <link href="/css/style.css" rel="stylesheet" integrity="sha384-TbfEhJn4HkgPUIZUhhHaAYsycYKHxSuIloCjZOiyCSpbVunRQxg5T5pxKVFwxilF" crossorigin="anonymous">

    

    

    

    

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="/">Home</a>
          
          <a class="nav-link" href="https://example.org" title="">Link 1</a>
          
        </nav>
      </div>
    </div>
    

    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title"><a href="/" rel="home">Adventures in Hugo</a></h1>
        <p class="lead blog-description">There is a thin line between agile and fragile</p>
      </div>
    </header>
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title"><a href="/osx/applescript-desktop-wallpaper-growl-automatically/">Applescript, Desktop Wallpaper and Growl. Automagically.</a></h2>
    <p class="blog-post-meta"><time datetime="2012-07-24T23:31:12Z">Tue Jul 24, 2012</time> by cmohn in 
<i class="fa fa-folder" aria-hidden="true"></i>&nbsp;<a href="/categories/os-x" rel="category tag">OS X</a>


<i class="fa fa-tag" aria-hidden="true"></i>&nbsp;<a href="/tags/applescript" rel="tag">Applescript</a>, <a href="/tags/automation" rel="tag">automation</a>, <a href="/tags/fun" rel="tag">fun</a>, <a href="/tags/mac" rel="tag">Mac</a>, <a href="/tags/os-x" rel="tag">OS X</a>, <a href="/tags/scripting" rel="tag">Scripting</a>

</p>
  </header>
  

<p>I´ve been a Mac and OS X user now for about 7 months, but to be honest I have not been very experimental in my usage of my Macbook Air. Until now, my main focus has been basic usage of the hardware and operating systems, and making it work in my corporate environment. As I feel that I´ve reached mission accomplished status on that initial project, I decided to use some of my &ldquo;free&rdquo; vacation time to play around a bit and experiment a bit more.</p>

<p>For some reason, I decided to start to play around a bit with Applescript and try to create something that changes my desktop wallpaper based on a &ldquo;Home&rdquo; and a &ldquo;Work&rdquo; scenario. Initially I made a quick script, my first ever Applescript, that presented a dialog box asking me if &ldquo;Home&rdquo; or &ldquo;Work&rdquo; was the current status, and then changed the desktop wallpaper accordingly. I then assigned that to a hotkey, so I could quickly change between the two modes.</p>

<p>That solution left me with two things; <em>One, it worked!</em> and Two, it could be done better by adding some automation to it.</p>

<p>Here is the solution I ended up with:</p>

<p>[cc lang=&ldquo;applescript&rdquo; tab_size=&ldquo;2&rdquo;]</p>

<h1 id="populate-ipaddr-variable-with-ip-address">Populate ipaddr variable with IP address</h1>

<p>set ipaddr to do shell script &ldquo;ifconfig | awk &lsquo;/broadcast/ {print $2}&rsquo; | tail -1&rdquo;</p>

<h1 id="check-if-connection-is-home-connection-based-on-ip-subnet">Check if connection is home connection, based on IP subnet</h1>

<h1 id="if-not-connected-set-ipaddr-variable-to-0-0-0-0-to-avoid-empty-variable-issues">If not connected, set ipaddr variable to 0.0.0.0 to avoid empty variable issues</h1>

<h1 id="dirty-hack-to-add-padding-to-zero-values-but-hey-it-works-for-me">Dirty hack to add padding to zero values, but hey, it works for me.</h1>

<p>if (ipaddr is &ldquo;&rdquo;) then
set ipaddr to &ldquo;000.000.0.0&rdquo;
end if</p>

<p>set ipaddrtxt to (characters 1 thru 9 of ipaddr) as string
if ipaddrtxt is &ldquo;192.168.5&rdquo; then # Change this to your own subnet
set situation to &ldquo;Home&rdquo;
else
set situation to &ldquo;Work&rdquo;
end if</p>

<h1 id="get-current-desktop-image-path">Get current desktop image path</h1>

<p>tell application &ldquo;System Events&rdquo;
tell current desktop
set currentDesktop to (get picture as text)
end tell
end tell</p>

<h1 id="build-the-desktop-image-path">Build the desktop image path</h1>

<p>set desktopPath to &ldquo;Macintosh HD:Users::Dropbox:switcher:&rdquo; &amp; situation &amp; &ldquo;.png&rdquo; # Change this to your own paths</p>

<h1 id="only-tell-finder-to-change-the-desktop-and-notify-growl-if-a-change-is-required-eg-desktop-path-not-equal-to-current-path">Only tell Finder to change the desktop and notify Growl if a change is required (eg. desktop path not equal to current path)</h1>

<p>if currentDesktop is not desktopPath then</p>

<h1 id="tell-finder-to-change-the-desktop">Tell Finder to change the desktop</h1>

<p>tell application &ldquo;Finder&rdquo;
set desktop picture to {desktopPath} as alias
end tell</p>

<p>tell application &ldquo;GrowlHelperApp&rdquo;
set the allNotificationsList to {&ldquo;Wallpaper Change&rdquo;}
set the enabledNotificationsList to {&ldquo;Wallpaper Change&rdquo;}
register as application &ldquo;Wallpaper Change&rdquo; all notifications allNotificationsList default notifications enabledNotificationsList icon of application &ldquo;Script Editor&rdquo;
&ndash; Send a Notification&hellip;
notify with name &ldquo;Wallpaper Change&rdquo; title &ldquo;Wallpaper Change&rdquo; description &ldquo;Wallpaper changed to &rdquo; &amp; (situation) application name &ldquo;Wallpaper Change&rdquo;
end tell
end if
[/cc]</p>

<p>I know my theme isn´t very suited for code pastes, so the whole applescript source code is also available for <a href="https://dl.dropbox.com/u/20629/vninja/Switcher.scpt">download</a>.</p>

<p>After the script was finished, I added it to my <a href="http://projects.tynsoe.org/en/geektool/">Geektools</a> bash script, that refreshes at a fairly frequent interval:</p>

<p>[cc lang=&ldquo;bash&rdquo; tab_size=&ldquo;2&rdquo;]</p>

<h1 id="run-background-switcher-applescript">Run Background Switcher Applescript</h1>

<p>osascript /Applescript/Switcher.scpt
[/cc]</p>

<p>Sure, I could have used a crontab instead, but for me the easiest way to get this working quickly was to add it to the existing setup I had in place.</p>

<h3 id="demo-time">Demo time!</h3>

<p>The Applescript detects if the computers IP address is on a given subnet, and if so it sets the wallpaper specified for that subnet, dubbed &ldquo;Home&rdquo;. If it determines that it is not on that particular subnet, it´s officially at &ldquo;Work&rdquo; and sets the wallpaper accordingly. That´s all the logic there is too it, and I´m sure that can be improved either by me or more likely someone who has been hit by the Applescript clue bat.</p>

<p>My desktop Wallpaper images are stored in a given folder in my Dropbox, with one of them called <em>Home</em> and the other called <em>Work</em>. This limits the script to those two given file names, and switches between the two accordingly. It also assumes the the files are on the <em>PNG</em> format. An added bonus by storing the files in Dropbox is that I can remotely change out the image, and keep the wallpapers synchronized between several computes if I wish to do so.</p>

<p>Note that I am under no circumstances a developer and that this is my first Applescript. I am sure there are much better ways to accomplish the same things, with better error handling and overall better code quality, but the fact is that this works for me and I´m happy with it.</p>


  

  
  <hr>
  <footer>

  
    <section>
    <h4>Share</h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=%2fosx%2fapplescript-desktop-wallpaper-growl-automatically%2f" title="Share on Facebook"><span class="fa fa-facebook fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://plus.google.com/share?url=%2fosx%2fapplescript-desktop-wallpaper-growl-automatically%2f" title="Share on Google+"><span class="fa fa-google-plus fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fosx%2fapplescript-desktop-wallpaper-growl-automatically%2f" title="Share on LinkedIn"><span class="fa fa-linkedin fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/home?status=%2fosx%2fapplescript-desktop-wallpaper-growl-automatically%2f" title="Tweet this"><span class="fa fa-twitter fa-2x"></span></a>
    </nav>
  </section>

  

  
  </footer>
  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  

  

  
  <section class="sidebar-module">
    <h4>Links</h4>
    <ol class="list-unstyled">
      
      <li><a href="https://example.com">Link 1</a></li>
      
      <li><a href="https://example.org">Link 2</a></li>
      
    </ol>
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p>
      
      &copy; Christian Mohn
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
