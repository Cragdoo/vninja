<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Applescript, Desktop Wallpaper and Growl. Automagically.  &middot; vNinja.net</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="Applescript, automation, fun, Mac, OS X, Scripting, ">

<link rel="author" href="http://plus.google.com/+Myprofile">


<meta property="og:title" content="Applescript, Desktop Wallpaper and Growl. Automagically.  &middot; vNinja.net ">
<meta property="og:site_name" content="vNinja.net"/>
<meta property="og:url" content="https://vninja.net/osx/applescript-desktop-wallpaper-growl-automatically/" />
<meta property="og:locale" content="en">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2012-07-24T23:31:12Z" />
<meta property="og:article:modified_time" content="2012-07-24T23:31:12Z" />

  
    
<meta property="og:article:tag" content="Applescript">
    
<meta property="og:article:tag" content="automation">
    
<meta property="og:article:tag" content="fun">
    
<meta property="og:article:tag" content="Mac">
    
<meta property="og:article:tag" content="OS X">
    
<meta property="og:article:tag" content="Scripting">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@h0bbel" />
<meta name="twitter:creator" content="@h0bbel" />
<meta name="twitter:title" content="Applescript, Desktop Wallpaper and Growl. Automagically." />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="https://vninja.net/osx/applescript-desktop-wallpaper-growl-automatically/" />
<meta name="twitter:domain" content="https://vninja.net">
  

  
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Applescript, Desktop Wallpaper and Growl. Automagically.",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+Myprofile?rel=author"
    },
    "datePublished": "2012-07-24",
    "description": "",
    "wordCount": 750
  }
</script>
  



<link rel="canonical" href="https://vninja.net/osx/applescript-desktop-wallpaper-growl-automatically/" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://vninja.net/touch-icon-144-precomposed.png">
<link rel="icon" href="https://vninja.net/favicon.png">
<meta name="generator" content="Hugo 0.42.2" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->



    <link rel="stylesheet" href="https://vninja.net/css/bootswatch/yeti/bootstrap.min.css">


<link rel="stylesheet" href="https://vninja.net/css/font-awesome.min.css">
<link rel="stylesheet" href="https://vninja.net/css/style.css">


<link rel="stylesheet" href="https://vninja.net/css/style_custom.css">



  <link rel="stylesheet" href="https://vninja.net/css/highlight/default.css">


  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
  <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
  <script>
  window.addEventListener("load", function(){
  window.cookieconsent.initialise({
    "palette": {
      "popup": {
        "background": "#efefef",
        "text": "#404040"
      },
      "button": {
        "background": "#8ec760",
        "text": "#ffffff"
      }
    },
    "showLink": false,
    "position": "bottom-right"
  })});
  </script>
</script>




</head>
<body data-ng-app="myapp" data-ng-controller="MyController" data-ng-mouseleave="MouseLeave($event)">
    <header id="main-header">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        
        <a class="navbar-brand" href="https://vninja.net/">
          vNinja.net
          
          
          </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            
            
            <li class="">
              
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class='fa fa-bars'></i> About <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    
                      <li class="">
                        <a href="https://vninja.net/about/christian-mohn/"><i class='fa fa-child'></i> About Christian</a>
                      </li>
                    
                  </ul>
              
            </li>
            
            <li class="">
              
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class='fa fa-asterisk'></i> Site Policy <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    
                      <li class="">
                        <a href="https://vninja.net/about/privacy-policy"><i class='fa fa-asterisk'></i> Privacy Policy</a>
                      </li>
                    
                  </ul>
              
            </li>
            
            <li class="">
              
                <a href="https://vninja.net/advertising" >
                  <i class='fa fa-bank'></i>
                  Advertising
                </a>
              
            </li>
            
            <li class="">
              
                <a href="https://vninja.net/post/index.xml" >
                  <i class='fa fa-rss'></i>
                  RSS
                </a>
              
            </li>
            
            
              
          </ul>
        </div>
        
      </div>
    </nav>
  </header>





<div class="container">
  <div class="row">
    <div class="col-sm-9">


      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <div class="title-metas text-center">

    <h1>Applescript, Desktop Wallpaper and Growl. Automagically.
</h1>

    <div class="metas">
<small>
  <i class="fa fa-calendar"></i>
  <time datetime="2012-07-24">24 Jul, 2012</time>
</small>


  <small>
    &middot; by Christian Mohn
  
  &middot; Read in about 4 min
  &middot; (750 words)
  &middot; 


  </small>

<div class="margin-10">
  <i class="fa fa-tags"></i>
  
  <a href="https://vninja.net/tags/applescript" class="label label-primary">Applescript</a>
  
  <a href="https://vninja.net/tags/automation" class="label label-primary">automation</a>
  
  <a href="https://vninja.net/tags/fun" class="label label-primary">fun</a>
  
  <a href="https://vninja.net/tags/mac" class="label label-primary">Mac</a>
  
  <a href="https://vninja.net/tags/os-x" class="label label-primary">OS X</a>
  
  <a href="https://vninja.net/tags/scripting" class="label label-primary">Scripting</a>
  


</div>

<br>
</div>

  </div>
</div>


      <div class="content">

  

  

<p>I´ve been a Mac and OS X user now for about 7 months, but to be honest I have not been very experimental in my usage of my Macbook Air. Until now, my main focus has been basic usage of the hardware and operating systems, and making it work in my corporate environment. As I feel that I´ve reached mission accomplished status on that initial project, I decided to use some of my &laquo;free&raquo; vacation time to play around a bit and experiment a bit more.</p>

<p>For some reason, I decided to start to play around a bit with Applescript and try to create something that changes my desktop wallpaper based on a &laquo;Home&raquo; and a &laquo;Work&raquo; scenario. Initially I made a quick script, my first ever Applescript, that presented a dialog box asking me if &laquo;Home&raquo; or &laquo;Work&raquo; was the current status, and then changed the desktop wallpaper accordingly. I then assigned that to a hotkey, so I could quickly change between the two modes.</p>

<p>That solution left me with two things; <em>One, it worked!</em> and Two, it could be done better by adding some automation to it.</p>

<p>Here is the solution I ended up with:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-applescriptb" data-lang="applescriptb"># Populate ipaddr variable with IP address
set ipaddr to do shell script &#34;ifconfig | awk &#39;/broadcast/ {print $2}&#39; | tail -1&#34;

# Check if connection is home connection, based on IP subnet

# If not connected, set ipaddr variable to 0.0.0.0 to avoid empty variable issues
# Dirty hack to add padding to zero values, but hey, it works for me.

if (ipaddr is &#34;&#34;) then
set ipaddr to &#34;000.000.0.0&#34;
end if

set ipaddrtxt to (characters 1 thru 9 of ipaddr) as string
if ipaddrtxt is &#34;192.168.5&#34; then # Change this to your own subnet
set situation to &#34;Home&#34;
else
set situation to &#34;Work&#34;
end if

# Get current desktop image path
tell application &#34;System Events&#34;
tell current desktop
set currentDesktop to (get picture as text)
end tell
end tell

# Build the desktop image path
set desktopPath to &#34;Macintosh HD:Users::Dropbox:switcher:&#34; &amp; situation &amp; &#34;.png&#34; # Change this to your own paths

# Only tell Finder to change the desktop and notify Growl if a change is required (eg. desktop path not equal to current path)
if currentDesktop is not desktopPath then

# Tell Finder to change the desktop
tell application &#34;Finder&#34;
set desktop picture to {desktopPath} as alias
end tell

tell application &#34;GrowlHelperApp&#34;
set the allNotificationsList to {&#34;Wallpaper Change&#34;}
set the enabledNotificationsList to {&#34;Wallpaper Change&#34;}
register as application &#34;Wallpaper Change&#34; all notifications allNotificationsList default notifications enabledNotificationsList icon of application &#34;Script Editor&#34;
-- Send a Notification...
notify with name &#34;Wallpaper Change&#34; title &#34;Wallpaper Change&#34; description &#34;Wallpaper changed to &#34; &amp; (situation) application name &#34;Wallpaper Change&#34;
end tell
end if</code></pre></div>

<p>I know my theme isn´t very suited for code pastes, so the whole applescript source code is also available for <a href="https://dl.dropbox.com/u/20629/vninja/Switcher.scpt">download</a>.</p>

<p>After the script was finished, I added it to my <a href="http://projects.tynsoe.org/en/geektool/">Geektools</a> bash script, that refreshes at a fairly frequent interval:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Run Background Switcher Applescript
</span><span style="color:#75715e"></span>osascript /Applescript/Switcher.scpt</code></pre></div>

<p>Sure, I could have used a crontab instead, but for me the easiest way to get this working quickly was to add it to the existing setup I had in place.</p>

<h3 id="demo-time">Demo time!</h3>

<p>The Applescript detects if the computers IP address is on a given subnet, and if so it sets the wallpaper specified for that subnet, dubbed &laquo;Home&raquo;. If it determines that it is not on that particular subnet, it´s officially at &laquo;Work&raquo; and sets the wallpaper accordingly. That´s all the logic there is too it, and I´m sure that can be improved either by me or more likely someone who has been hit by the Applescript clue bat.</p>

<p>My desktop Wallpaper images are stored in a given folder in my Dropbox, with one of them called <em>Home</em> and the other called <em>Work</em>. This limits the script to those two given file names, and switches between the two accordingly. It also assumes the the files are on the <em>PNG</em> format. An added bonus by storing the files in Dropbox is that I can remotely change out the image, and keep the wallpapers synchronized between several computes if I wish to do so.</p>

<p>Note that I am under no circumstances a developer and that this is my first Applescript. I am sure there are much better ways to accomplish the same things, with better error handling and overall better code quality, but the fact is that this works for me and I´m happy with it.</p>

</div>


      <footer>
  


  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="https://vninja.net/vmware-2/techtalks-at-vmworld2012/" title="10 minute lightning Tech Talk at VMworld?">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="https://vninja.net/virtualization/building-end-user-computing-solutions-vmware-view-book/" title="Building End-User Computing Solutions with VMware View Book Available">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  

</div>

</footer>

    </div>
    
      <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
        <div>
  

    <div class="section">
      <h4>Sponsors</h4>
      <div class="ads" id="veeam">
        <ins class='dcmads' style='display:inline-block;width:250px;height:250px' data-dcm-placement='N410401.1772869VNINJA.NET/B10464038.145283149' data-dcm-rendering-mode='iframe' data-dcm-https-only data-dcm-resettable-device-id='' data-dcm-app-id=''> <script src='https://www.googletagservices.com/dcm/dcmads.js'></script> </ins>
      </div>
      <div class="ads" id="turbonomic">
        <a href="http://turbonomic.com/resources/hybrid-cloud-intelligent-bursting-aws-microsoft-azure/?utm_source=vninja&amp;utm_medium=banner-ad&amp;utm_campaign=wp-path-to-hybrid-cloud&amp;">
          <img width="250" height="250" src="https://vninja.net/ads/wp-intelligent-bursting-aws-azure-250x250.png"></a>
      </div>
      <div class="ads" id="goliath">
        <a href="http://goliathtechnologies.com/performance-monitoring/application-desktop-virtualization/vmware-horizon-view-monitoring/?utm_source=VNINJA&#038;utm_medium=PARTNER-MKTG&#038;utm_campaign=PARTNER-MKTG-VNINJA"><img width="250" height="250" src='https://vninja.net/ads/VMwareHorizon.jpg' alt='' title='VMwareHorizon' /></a>
      </div>
      <div class="ads" id="vembu">
        <a href="https://www.vembu.com/free-vm-backup/?utm_source=vninja.net&#038;utm_medium=Banner"><img width="250" height="250" src='https://vninja.net/ads/vembu250-250.gif'/></a>
      </div>


    </div>

    <hr>
    
      
      
      <div class="section">


      </div>
      
    
      
      
      <div class="section">


      </div>
      
    

</div>

      </div>
    
  </div>
</div>
    
<footer class="footer hidden-print">
  <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <div class="pull-left">
  <a class="toplink" href="javascript:" id="return-to-top">back to top</a>
</div>
<div class="pull-right">

<a href="https://vninja.net/disclaimer/">Disclaimer</a> <i>&middot;</i>

</div>

        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
              
    
<div class="container footline">
    <small>
  Built with Hugo and lots of <i class='fa fa-coffee'></i>

</small>
</div>


    
<div class="container copyright">
    <small>
  &copy; 2018 Christian Mohn

  </small>
</div>




        </div>
    </div>
  </div>
</footer>

    

<script src="https://vninja.net/js/jquery.min.js"></script>
<script src="https://vninja.net/js/bootstrap.min.js"></script>


<script src="https://vninja.net/js/highlight.pack.js"></script>
<script src="https://vninja.net/js/site.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
  var _gaq=[['_setAccount','UA-121910549-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script>
var ENABLE_POPOVER = "", 
EXPIRE_COOKIE = "", 
SHOW_MODAL_TIMEOUT = "", 
MOUSE_LEAVE = "", 
MODAL_SIZE = "", 
POST_URL = "", 
SIGNUP_HEADER = "",
HEADER_IMAGE = "",
IMG_DESCRIPTION = "",
SIGNUP_TEXT = "",
INPUT_PLACEHOLDER = "",
SUBMIT_BUTTON = "",
SUCCESS_MESSAGE = "",
ERROR_MESSAGE = "",
OPTIN = "",
COOKIE_NAME = "",
CONTENTLANGUAGE = ""; 
</script>










  </body>
</html>

