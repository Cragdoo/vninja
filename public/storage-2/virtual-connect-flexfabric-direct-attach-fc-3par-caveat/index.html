<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Virtual Connect FlexFabric and Direct-Attach FC 3Par Caveat  &middot; vNinja.net</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="3Par, BladeSystem, Bug, Fibre Channel, HP, SFP&#43;, storage, StoreServ, Virtual Connect, ">

<link rel="author" href="http://plus.google.com/+Myprofile">


<meta property="og:title" content="Virtual Connect FlexFabric and Direct-Attach FC 3Par Caveat  &middot; vNinja.net ">
<meta property="og:site_name" content="vNinja.net"/>
<meta property="og:url" content="/storage-2/virtual-connect-flexfabric-direct-attach-fc-3par-caveat/" />
<meta property="og:locale" content="en">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2013-05-30T21:08:45Z" />
<meta property="og:article:modified_time" content="2013-05-30T21:08:45Z" />

  
    
<meta property="og:article:tag" content="3Par">
    
<meta property="og:article:tag" content="BladeSystem">
    
<meta property="og:article:tag" content="Bug">
    
<meta property="og:article:tag" content="Fibre Channel">
    
<meta property="og:article:tag" content="HP">
    
<meta property="og:article:tag" content="SFP&#43;">
    
<meta property="og:article:tag" content="storage">
    
<meta property="og:article:tag" content="StoreServ">
    
<meta property="og:article:tag" content="Virtual Connect">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@h0bbel" />
<meta name="twitter:creator" content="@h0bbel" />
<meta name="twitter:title" content="Virtual Connect FlexFabric and Direct-Attach FC 3Par Caveat" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="/storage-2/virtual-connect-flexfabric-direct-attach-fc-3par-caveat/" />
<meta name="twitter:domain" content="/">
  

  
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Virtual Connect FlexFabric and Direct-Attach FC 3Par Caveat",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+Myprofile?rel=author"
    },
    "datePublished": "2013-05-30",
    "description": "",
    "wordCount": 420
  }
</script>
  



<link rel="canonical" href="/storage-2/virtual-connect-flexfabric-direct-attach-fc-3par-caveat/" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
<link rel="icon" href="/favicon.png">
<meta name="generator" content="Hugo 0.40.3" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->



    <link rel="stylesheet" href="/css/bootswatch/lux/bootstrap.min.css">


<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css">


<link rel="stylesheet" href="/css/style_custom.css">



  <link rel="stylesheet" href="/css/highlight/default.css">


</head>
<body data-ng-app="myapp" data-ng-controller="MyController" data-ng-mouseleave="MouseLeave($event)">
    <header id="main-header">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        
        <a class="navbar-brand" href="/">
          vNinja.net
          
          
          </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            
            
            <li class="">
              
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class='fa fa-bars'></i> About <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    
                      <li class="">
                        <a href="/about/christian-mohn/"><i class='fa fa-child'></i> About vNinja</a>
                      </li>
                    
                      <li class="">
                        <a href="/about/christian-mohn/"><i class='fa fa-child'></i> About Christian</a>
                      </li>
                    
                  </ul>
              
            </li>
            
            <li class="">
              
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class='fa fa-hand-lizard-o'></i> Site Policy <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    
                      <li class="">
                        <a href="/about/privacy-policy"><i class='fa fa-hand-lizard-o'></i> Privacy Policy</a>
                      </li>
                    
                  </ul>
              
            </li>
            
            <li class="">
              
                <a href="/advertising" >
                  <i class='fa fa-bank'></i>
                  Advertising
                </a>
              
            </li>
            
            
              
          </ul>
        </div>
        
      </div>
    </nav>
  </header>





<div class="container">
  <div class="row">
    <div class="col-sm-9">


      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <div class="title-metas text-center">

    <h1>Virtual Connect FlexFabric and Direct-Attach FC 3Par Caveat
</h1>

    <div class="metas">
<small>
  <i class="fa fa-calendar"></i>
  <time datetime="2013-05-30">30 May, 2013</time>
</small>


  <small>
    &middot; by Christian Mohn
  
  &middot; Read in about 2 min
  &middot; (420 words)
  &middot; 
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=%2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=Virtual%20Connect%20FlexFabric%20and%20Direct-Attach%20FC%203Par%20Caveat&amp;url=%2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=%2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=%2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f&amp;title=Virtual%20Connect%20FlexFabric%20and%20Direct-Attach%20FC%203Par%20Caveat" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=Virtual%20Connect%20FlexFabric%20and%20Direct-Attach%20FC%203Par%20Caveat&amp;body=Check out this site %2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  </small>

<div class="margin-10">
  <i class="fa fa-tags"></i>
  
  <a href="/tags/3par" class="label label-primary">3Par</a>
  
  <a href="/tags/bladesystem" class="label label-primary">BladeSystem</a>
  
  <a href="/tags/bug" class="label label-primary">Bug</a>
  
  <a href="/tags/fibre-channel" class="label label-primary">Fibre Channel</a>
  
  <a href="/tags/hp" class="label label-primary">HP</a>
  
  <a href="/tags/sfp&#43;" class="label label-primary">SFP&#43;</a>
  
  <a href="/tags/storage" class="label label-primary">storage</a>
  
  <a href="/tags/storeserv" class="label label-primary">StoreServ</a>
  
  <a href="/tags/virtual-connect" class="label label-primary">Virtual Connect</a>
  


</div>

<br>
</div>

  </div>
</div>


      <div class="content">
  <p>When configuring a new C7000 Blade Enclosure with a couple of FlexFabric 10Gb/24-port modules I ran into a rather annoying issue during setup.</p>

<p>HP Virtual Connect 3.70 introduced support for Direct-Attach setups of HP 3Par StoreServ 7000 storage systems, where you can eliminate the need for dedicated FC switches. For full details, have a look at <a href="http://h20000.www2.hp.com/bc/docs/support/SupportManual/c03605173/c03605173.pdf">Implementing HP Virtual Connect Direct-Attach Fibre Channel with HP 3PAR StoreServ Systems</a>.</p>

<p>This is excellent for setups where all your hosts are HP Blades, and you have a Virtual Connect FlexFabric setup. After all, less components means less complexity, right?</p>

<p>The problem I ran into is a bit strange though, and it took some time figuring out what was wrong. The HP 3Par StoreServ 7200 was racked, stacked and configured when the FC <a href="http://en.wikipedia.org/wiki/Small_form-factor_pluggable_transceiver">SFP+</a>  modules where installed in the FlexFabric module, and I pretty much thought it would be plug and play from there to get the blades to talk FC to the HP 3Par after going through the Virtual Connect setup.</p>

<p>Sadly, that was not the case. It seems there is a bug in the web GUI for VC 3.70 that prevents getting a working setup. I know 3.75 is released, but nothing in the <a href="http://bizsupport2.austin.hp.com/bc/docs/support/SupportManual/c03673099/c03673099.pdf">release notes</a> seem to indicate that this has been fixed in that release.</p>

<p>For some reason, the &laquo;Fabric Type&raquo; dropdown where you should be able to select either &laquo;FabricAttach&raquo; or &laquo;DirectAttach&raquo; is greyed out, thus preventing the proper configuration of the SAN Fabric in &laquo;DirectAttach&raquo; mode. It defaults to &laquo;FabricAttach&raquo;, and in a Direct-Attach scenario that simply does not work. You will not be able to get a FC link and the SFP+ module will be listed as &laquo;unsupported&raquo;.</p>

<p><a href="http://vninja.net/wordpress/wp-content/uploads/2013/05/SanFabric-1a.png"><img src="http://vninja.net/wordpress/wp-content/uploads/2013/05/SanFabric-1a-300x157.png" alt="SanFabric-1a" /></a></p>

<p>The solution was to create the SAN Fabric manually by using the Virtual Connect CLI interface. T
he following commands created the two fabrics required for redundancy (VC module in Bay 1 and in Bay 2)</p>

<p>[cc lang=&laquo;bash&raquo; width=&laquo;100%&raquo; theme=&laquo;blackboard&raquo; nowrap=&laquo;0&raquo;]
add fabric Fabric-1-3PAR Bay=1 Ports=1 Type=DirectAttach
add fabric Fabric-2-3PAR Bay=2 Ports=1 Type=DirectAttach
[/cc]</p>

<p>As you can see, by using the <em>add fabric</em> command it was possible to define the correct Fabric Type and I could then proceed to add Port 2 from Bay 2 to Fabric-1-3PAR and vice versa to create a fully redundant setup.</p>

<p><a href="http://vninja.net/wordpress/wp-content/uploads/2013/05/SanFabric-2.png"><img src="http://vninja.net/wordpress/wp-content/uploads/2013/05/SanFabric-2-300x76.png" alt="SanFabric-2" /></a></p>

<p>Why the VC GUI prevented me from setting the correct fabric type is beyond me, but for some reason it simply did not allow me to change this rather important setting, and prevented the setup from working without using the CLI for configuration.</p>

</div>


      <footer>
  
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=%2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=Virtual%20Connect%20FlexFabric%20and%20Direct-Attach%20FC%203Par%20Caveat&amp;url=%2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=%2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=%2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f&amp;title=Virtual%20Connect%20FlexFabric%20and%20Direct-Attach%20FC%203Par%20Caveat" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=Virtual%20Connect%20FlexFabric%20and%20Direct-Attach%20FC%203Par%20Caveat&amp;body=Check out this site %2fstorage-2%2fvirtual-connect-flexfabric-direct-attach-fc-3par-caveat%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="/virtualization/quick-and-dirty-http-based-deployment/" title="Quick and Dirty HTTP Based Deployment">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="/vmware-2/centrally-disable-nat-vmware-workstation/" title="Centrally Disable NAT in VMware Workstation">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  

</div>

</footer>

    </div>
    
      <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
        <hr>
<div>
  

    <div class="section">
      <div class="ads">
        <a href="http://turbonomic.com/resources/hybrid-cloud-intelligent-bursting-aws-microsoft-azure/?utm_source=vninja&amp;utm_medium=banner-ad&amp;utm_campaign=wp-path-to-hybrid-cloud&amp;utm_content=250x250"><img width="250" height="250" src="https://i1.wp.com/vninja.net/wordpress/wp-content/uploads/2017/11/wp-intelligent-bursting-aws-azure-250x250.png?zoom=2&amp;fit=250%2C250" alt="" title="wp-intelligent-bursting-aws-azure (250x250)" src-orig="https://i1.wp.com/vninja.net/wordpress/wp-content/uploads/2017/11/wp-intelligent-bursting-aws-azure-250x250.png?fit=250%2C250" scale="2"></a>
      </div>
      <div class="ads">
        <a href="http://cohesity.com"><img width="250" height="250" src="https://i2.wp.com/vninja.net/wordpress/wp-content/uploads/2016/12/250x250_cohesity_ad-1.gif?zoom=2&amp;fit=250%2C250" alt="" title="250x250_cohesity_ad-1" src-orig="https://i2.wp.com/vninja.net/wordpress/wp-content/uploads/2016/12/250x250_cohesity_ad-1.gif?fit=250%2C250" scale="2"></a>
      </div>
    </div>
<hr>
    
      
      
      <div class="section">
        sidebar 2
      </div>
      
    
      
      
    

</div>

      </div>
    
  </div>
</div>
    
<footer class="footer hidden-print">
  <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <div class="pull-left">
  <a class="toplink" href="javascript:" id="return-to-top">back to top</a>
</div>
<div class="pull-right">

<a href="/disclaimer/">Disclaimer</a> <i>&middot;</i>

<a href="/terms/">Terms</a> 

</div>

        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
              
    
<div class="container footline">
    <small>
  Built with Hugo and lots of <i class='fa fa-coffee'></i>

</small>
</div>


    
<div class="container copyright">
    <small>
  &copy; 2018 Copyright my blog

  </small>
</div>




        </div>
    </div>
  </div>
</footer>

    

<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>


<script src="/js/highlight.pack.js"></script>
<script src="/js/site.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
  var _gaq=[['_setAccount','Your Google Analytics tracking code'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script>
var ENABLE_POPOVER = "", 
EXPIRE_COOKIE = "", 
SHOW_MODAL_TIMEOUT = "", 
MOUSE_LEAVE = "", 
MODAL_SIZE = "", 
POST_URL = "", 
SIGNUP_HEADER = "",
HEADER_IMAGE = "",
IMG_DESCRIPTION = "",
SIGNUP_TEXT = "",
INPUT_PLACEHOLDER = "",
SUBMIT_BUTTON = "",
SUCCESS_MESSAGE = "",
ERROR_MESSAGE = "",
OPTIN = "",
COOKIE_NAME = "",
CONTENTLANGUAGE = ""; 
</script>










  </body>
</html>

